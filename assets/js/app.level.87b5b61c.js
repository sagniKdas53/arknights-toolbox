(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app.level"],{"0fa7":function(t,e,i){"use strict";var a=i("29b4"),n=i.n(a);n.a},"29b4":function(t,e,i){},"6d22":function(t,e,i){},"73e0":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"arkn-level"}},[i("div",{staticClass:"mdui-row"},[i("div",{staticClass:"mdui-col-md-5"},[i("table",{staticClass:"mdui-table tag-table",staticStyle:{"overflow-x":"hidden"}},[i("tbody",[i("tr",[i("td",{attrs:{width:"1"}}),i("td",{staticClass:"mdui-valign"},[i("div",{staticClass:"number-select with-label mdui-m-r-3"},[i("label",{staticClass:"mdui-textfield-label"},[t._v(t._s(t.$t("common.stars")))]),i("mdui-select-num",{staticClass:"mdui-select-width-100p",attrs:{options:t.$_.range(6,0),"mdui-options":{gutter:72}},on:{change:t.updateSelect},model:{value:t.inputs.star,callback:function(e){t.$set(t.inputs,"star",e)},expression:"inputs.star"}})],1),i("div",{staticClass:"with-label mdui-m-r-3"},[i("label",{staticClass:"mdui-textfield-label"},[t._v(t._s(t.$tt("level.经验本")))]),i("span",[t._v("LS-5")])]),i("div",{staticClass:"with-label"},[i("label",{staticClass:"mdui-textfield-label"},[t._v(t._s(t.$tt("level.金币本")))]),i("span",[t._v("CE-5")])])])]),i("tr",[i("td",{attrs:{width:"1"}},[i("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.$root.color.tagBtnHead,expression:"$root.color.tagBtnHead"}],staticClass:"mdui-btn mdui-btn-dense no-pe tag-btn tag-table-header"},[t._v(t._s(t.$t("common.current")))])]),i("td",{staticClass:"mdui-valign"},[i("div",{staticClass:"number-select with-label mdui-m-r-3"},[i("label",{staticClass:"mdui-textfield-label"},[t._v(t._s(t.$t("common.promotion")))]),i("mdui-select-num",{staticClass:"mdui-select-width-100p select-need-update",attrs:{options:t.$_.range(0,t.maxElite[t.inputs.star-1]+1)},on:{change:t.updateSelect},model:{value:t.inputs.current.elite,callback:function(e){t.$set(t.inputs.current,"elite",e)},expression:"inputs.current.elite"}})],1),i("div",{staticClass:"mdui-m-r-2 input-with-button"},[i("mdui-number-input",{model:{value:t.inputs.current.level,callback:function(e){t.$set(t.inputs.current,"level",t._n(e))},expression:"inputs.current.level"}},[t._v(t._s(t.$t("common.level")))]),i("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.$root.color.pinkText,expression:"$root.color.pinkText"}],staticClass:"mdui-btn mdui-ripple mdui-btn-dense small-btn mdui-p-x-1",on:{click:function(e){t.inputs.current.level=999}}},[t._v(t._s(t.$t("common.max")))])],1),i("mdui-number-input",{staticStyle:{"flex-grow":"1","max-width":"80px"},model:{value:t.inputs.current.exp,callback:function(e){t.$set(t.inputs.current,"exp",t._n(e))},expression:"inputs.current.exp"}},[t._v(t._s(t.$t("common.exp")))])],1)]),i("tr",[i("td",{attrs:{width:"1"}},[i("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.$root.color.tagBtnHead,expression:"$root.color.tagBtnHead"}],staticClass:"mdui-btn mdui-btn-dense no-pe tag-btn tag-table-header"},[t._v(t._s(t.$t("common.target")))])]),i("td",{staticClass:"mdui-valign"},[i("div",{staticClass:"number-select with-label mdui-m-r-3"},[i("label",{staticClass:"mdui-textfield-label"},[t._v(t._s(t.$t("common.promotion")))]),i("mdui-select-num",{staticClass:"mdui-select-width-100p select-need-update",attrs:{options:t.$_.range(t.inputs.current.elite,t.maxElite[t.inputs.star-1]+1)},on:{change:t.updateSelect},model:{value:t.inputs.target.elite,callback:function(e){t.$set(t.inputs.target,"elite",e)},expression:"inputs.target.elite"}})],1),i("div",{staticClass:"input-with-button"},[i("mdui-number-input",{model:{value:t.inputs.target.level,callback:function(e){t.$set(t.inputs.target,"level",t._n(e))},expression:"inputs.target.level"}},[t._v(t._s(t.$t("common.level")))]),i("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.$root.color.pinkText,expression:"$root.color.pinkText"}],staticClass:"mdui-btn mdui-ripple mdui-btn-dense small-btn mdui-p-x-1",on:{click:function(e){t.inputs.target.level=999}}},[t._v(t._s(t.$t("common.max")))])],1)])]),i("tr",[i("td",{attrs:{width:"1"}},[i("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.$root.color.tagBtnHead,expression:"$root.color.tagBtnHead"}],staticClass:"mdui-btn mdui-btn-dense no-pe tag-btn tag-table-header"},[t._v(t._s(t.$t("common.owned")))])]),i("td",{staticClass:"mdui-valign",style:{marginRight:"-16px",marginBottom:"-8px"}},[t._l(t.$_.range(5,1),(function(e){return i("div",{key:"have-"+e,staticClass:"mdui-m-r-2 mdui-m-b-1 mdui-valign"},[i("arkn-item",{attrs:{t:e,img:t.k2i(e)}}),i("mdui-number-input",{staticClass:"exp-input",model:{value:t.inputs.have[e],callback:function(i){t.$set(t.inputs.have,e,t._n(i))},expression:"inputs.have[i]"}},[t._v(t._s(t.$t("item."+t.expId[e-2])))])],1)})),i("div",{staticClass:"mdui-m-r-2 mdui-m-b-1 mdui-valign"},[i("arkn-item",{attrs:{t:"4",img:"4001"}}),i("mdui-number-input",{staticClass:"exp-input",staticStyle:{width:"80px"},model:{value:t.inputs.money,callback:function(e){t.$set(t.inputs,"money",t._n(e))},expression:"inputs.money"}},[t._v(t._s(t.$t("item.4001")))])],1)],2)]),i("tr",[i("td",{attrs:{colspan:"2"}},[i("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.$root.color.redBtn,expression:"$root.color.redBtn"}],staticClass:"mdui-btn mdui-ripple mdui-btn-dense tag-btn",on:{click:t.reset}},[t._v(t._s(t.$t("common.reset")))])])])])])]),i("div",{staticClass:"mdui-col-md-7 mdui-p-x-2 mdui-typo"},[i("h2",{staticClass:"mdui-hidden-sm-down mdui-m-t-0"},[t._v(t._s(t.$tt("level.至少需要")))]),i("h2",{staticClass:"mdui-hidden-md-up"},[t._v(t._s(t.$tt("level.至少需要")))]),i("div",{staticClass:"num-item-list"},[i("arkn-num-item",{attrs:{t:"5",img:"5001",lable:t.$t("common.exp"),num:t.result.exp}}),i("arkn-num-item",{staticClass:"mdui-m-r-0",attrs:{t:"4",img:"4001",lable:t.$t("item.4001")+"("+t.$t("common.total")+")",num:t.result.cost}}),t.inputs.money?i("arkn-num-item",{attrs:{t:"4",img:"4001",lable:t.$t("item.4001")+"("+t.$t("common.lack")+")",num:t.ge0(t.result.cost-t.inputs.money)}}):t._e()],1),i("h2",[t._v(t._s(t.$tt("level.物资筹备")))]),i("h3",{staticClass:"mdui-m-t-0"},[t._v("LS-5 "),i("small",[t._v("× "+t._s(t.result.ls5))])]),i("div",{staticClass:"num-item-list"},[i("arkn-num-item",{attrs:{t:"0",img:"AP_GAMEPLAY",lable:t.$t("item.AP_GAMEPLAY"),num:30*t.result.ls5}}),t._l(t.$_.range(5,2),(function(e){return i("arkn-num-item",{key:"ls5-"+e,attrs:{t:e,img:t.k2i(e),lable:t.$t("item."+t.expId[e-2]),num:t.result.ls5*t.LS5.drop[e]}})})),i("arkn-num-item",{attrs:{t:"4",img:"4001",lable:t.$t("item.4001"),num:t.result.ls5*t.LS5.money}})],2),i("h3",[t._v("CE-5 "),i("small",[t._v("× "+t._s(t.result.ce5))])]),i("div",{staticClass:"num-item-list"},[i("arkn-num-item",{attrs:{t:"0",img:"AP_GAMEPLAY",lable:t.$t("item.AP_GAMEPLAY"),num:30*t.result.ce5}}),i("arkn-num-item",{attrs:{t:"4",img:"4001",lable:t.$t("item.4001"),num:t.result.ce5*t.CE5.money}})],1),i("h2",[t._v(t._s(t.$tt("level.预计消耗"))+" "),i("small",[t._v(t._s(t.$t("common.need"))+" / "+t._s(t.$t("common.owned")))])]),i("div",{staticClass:"num-item-list"},t._l(t.$_.range(5,1),(function(e){return i("arkn-num-item",{key:"num-item-"+e,attrs:{t:e,img:t.k2i(e),lable:t.$t("item."+t.expId[e-2]),num:t.result.use[e]+" / "+t.result.have[e]}})})),1)])])])},n=[],s=(i("d81d"),i("07ac"),i("b85c")),l=i("8679"),r=i("b4ac"),u=i("60bb"),m=i.n(u),c=i("b9af"),o=i("9a9a"),d={5:2e3,4:1e3,3:400,2:200},p={exp:7400,drop:{5:3,4:1,3:1,2:0},money:360},v={money:7500},h={star:6,current:{elite:0,level:1,exp:0},target:{elite:0,level:1},have:{5:0,4:0,3:0,2:0},money:0};function b(t){return Math.max(t,0)}var g={name:"arkn-level",components:{ArknItem:l["a"],ArknNumItem:r["a"]},data:function(){return{inputs:m.a.cloneDeep(h),expId:["2001","2002","2003","2004"],maxElite:m.a.map(o["c"],(function(t){return t.length})),maxLevel:o["d"],LS5:p,CE5:v}},watch:{inputs:{handler:function(t){for(var e=t.star,i=t.current,a=0,n=["current","target"];a<n.length;a++){var s=n[a],l="".concat(s,".level"),r=m.a.get(t,l);if(""!==r){var u=o["d"][e-1][t[s].elite];r<1?m.a.set(t,l,1):r>u&&m.a.set(t,l,u)}}if(i.exp){i.exp<0&&(i.exp=0);var c=o["a"][i.elite][(i.level||1)-1]||1;i.exp>=c&&(i.exp=c-1)}m.a.each(t.have,(function(t,e,i){t&&t<0&&(i[e]=0)})),localStorage.setItem("level.inputs",JSON.stringify(t))},deep:!0}},computed:{result:function(){var t=this.inputs,e=t.star,i=t.current,a=t.target,n=t.have,l=t.money,r=o["d"][e-1],u=m.a.sum(m.a.map(n,(function(t,e){return t*d[e]}))),c=0,h=0,g=[],f={5:0,4:0,3:0,2:0};if(a.elite>i.elite||a.level>i.level){var _=o["a"][i.elite][i.level-1];if(_){var x=_-i.exp,$=x/_*o["b"][i.elite][i.level-1];c+=x,h+=$}for(var C=i.elite;C<=a.elite;C++,g.push(c)){C>i.elite&&(h+=o["c"][e-1][C-1]);for(var w=C==a.elite?a.level:r[C],k=C==i.elite?i.level+1:1;k<w;k++)c+=o["a"][C][k-1],h+=o["b"][C][k-1]}}var y=b(Math.ceil((c-u)/p.exp));if(g.length>0){m.a.forEachRight(g,(function(t,e,i){e>0&&(i[e]-=i[e-1])}));var S,E=m.a.mapValues(p.drop,(function(t,e){return n[e]+t*y})),A=Object(s["a"])(g);try{for(A.s();!(S=A.n()).done;){var N=S.value;while(N>0){0==m.a.sum(Object.values(E))&&(y++,E=m.a.cloneDeep(p.drop));for(var B=5;B>=2;B--)while(N>=d[B]&&E[B]>0)f[B]++,E[B]--,N-=d[B];for(var I=2;I<=5;I++)while(N>0&&E[I]>0)f[I]++,E[I]--,N-=d[I]}}}catch(M){A.e(M)}finally{A.f()}}var L=b(Math.ceil((h-y*p.money-l)/v.money));return{exp:c,cost:Math.ceil(h),ls5:y,ce5:L,use:f,have:m.a.mapValues(p.drop,(function(t,e){return n[e]+t*y}))}}},methods:{ge0:b,updateSelect:function(){var t=this,e=this.inputs,i=e.star,a=e.current,n=e.target,s=this.maxElite[i-1];a.elite>s&&(a.elite=s),n.elite>s&&(n.elite=s),a.elite>n.elite&&(n.elite=a.elite),this.$nextTick((function(){return t.$$(".select-need-update").each((function(e,i){return new t.$Select(i).handleUpdate()}))}))},reset:function(){var t=this;this.inputs=m.a.cloneDeep(h),this.$nextTick((function(){return t.$$(".select-need-update").each((function(e,i){return new t.$Select(i).handleUpdate()}))}))},k2i:function(t){return t+1999}},created:function(){this.inputs=Object(c["a"])(localStorage.getItem("level.inputs"),this.inputs)}},f=g,_=(i("840d"),i("2877")),x=Object(_["a"])(f,a,n,!1,null,null,null);e["default"]=x.exports},"840d":function(t,e,i){"use strict";var a=i("6d22"),n=i.n(a);n.a},8679:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("img",{staticClass:"arkn-item mdui-m-r-1 no-sl no-pe",style:{width:t.widthCss,height:t.widthCss},attrs:{src:t.$root.materialImage(t.img),crossorigin:"anonymous"}})},n=[],s=(i("a9e3"),{name:"arkn-item",computed:{widthCss:function(){return"number"===typeof this.width?"".concat(this.width,"px"):this.width}},props:{img:String,width:{type:[Number,String],default:48}}}),l=s,r=(i("0fa7"),i("2877")),u=Object(r["a"])(l,a,n,!1,null,"48273ef1",null);e["a"]=u.exports},9541:function(t,e,i){"use strict";var a=i("b7d1"),n=i.n(a);n.a},b4ac:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"num-item"},[i("div",{staticClass:"mdui-valign"},[i("arkn-item",{attrs:{img:t.img,width:t.width}}),i("div",{staticClass:"num-item-text with-label",class:t.color},[i("label",{staticClass:"mdui-textfield-label mdui-text-truncate"},[t._v(t._s(t.lable))]),"undefined"!=typeof t.num?i("span",[t._v(t._s(t.num))]):i("span",[t._t("default")],2)])],1)])},n=[],s=(i("a9e3"),i("ac1f"),i("8679")),l={name:"arkn-num-item",components:{ArknItem:s["a"]},computed:{calcT:function(){if(this.t)return this.t;var t=/-(.+)-/.exec(this.img);return!!t&&t[1]}},props:{img:String,lable:String,num:[Number,String],width:Number,color:[String,Boolean]}},r=l,u=(i("9541"),i("2877")),m=Object(u["a"])(r,a,n,!1,null,null,null);e["a"]=m.exports},b7d1:function(t,e,i){}}]);